<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Framework Modular</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="user-info">
                    <div class="user-avatar">U</div>
                    <div>
                        <div style="font-weight: 600; font-size: 14px;">Usuario</div>
                        <div style="font-size: 12px; color: #888;">Framework Modular</div>
                    </div>
                </div>

                <div class="search-box" style="position: relative; margin-top: 16px;">
                    <input type="text" class="search-input" placeholder="Buscar..." id="searchInput" style="width: 100%; padding: 8px 12px 8px 36px; border: 1px solid #e1e1e1; border-radius: 6px; font-size: 14px; background-color: #f8f8f8;">
                    <div class="search-icon" style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: #888;">üîç</div>
                </div>
            </div>

            <nav class="sidebar-nav">
                <!-- Secci√≥n de Espacios de Trabajo (M√≥dulos) -->
                <div class="nav-section">
                    <div class="nav-section-title">Espacios de Trabajo</div>
                    <div id="modulesList">
                        <!-- Los m√≥dulos se cargar√°n din√°micamente -->
                    </div>
                </div>

                <!-- Navegaci√≥n espec√≠fica del m√≥dulo actual -->
                <div id="moduleNavigation">
                    <!-- Se cargar√° din√°micamente seg√∫n el m√≥dulo activo -->
                </div>

                <!-- Configuraci√≥n Global -->
                <div class="nav-section">
                    <div class="nav-section-title">Configuraci√≥n</div>
                    <div class="nav-item" onclick="showGlobalConfigModal()">
                        <div class="nav-item-icon">‚öôÔ∏è</div>
                        <div class="nav-item-text">Configuraci√≥n Global</div>
                    </div>
                    <div class="nav-item" onclick="showDataManagementModal()">
                        <div class="nav-item-icon">üíæ</div>
                        <div class="nav-item-text">Gesti√≥n de Datos</div>
                    </div>
                </div>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <header class="main-header">
                <div style="display: flex; align-items: center; gap: 16px;">
                    <button class="mobile-menu-btn" onclick="toggleSidebar()">‚ò∞</button>
                    <h1 class="main-title" id="mainTitle">Framework Modular</h1>
                </div>
                <div class="header-actions">
                    <!-- Selector de Espacio (M√≥dulo) -->
                    <div class="space-selector">
                        <select id="spaceSelect" class="space-select" onchange="switchSpace(this.value)">
                            <option value="">Seleccionar Espacio...</option>
                        </select>
                        <button class="space-btn" onclick="showSpaceConfigModal()" title="Configurar Espacios">
                            ‚öôÔ∏è
                        </button>
                    </div>

                    <!-- Acciones espec√≠ficas del m√≥dulo -->
                    <div id="moduleActions">
                        <!-- Se cargar√°n din√°micamente seg√∫n el m√≥dulo activo -->
                    </div>
                </div>
            </header>

            <!-- Contenido del m√≥dulo actual -->
            <div class="module-container" id="moduleContainer">
                <!-- Se cargar√° din√°micamente el contenido del m√≥dulo -->
                <div class="welcome-screen">
                    <div class="welcome-icon">üöÄ</div>
                    <div class="welcome-title">Bienvenido al Framework Modular</div>
                    <div class="welcome-description">Selecciona un espacio de trabajo para comenzar</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Configuraci√≥n Global -->
    <div class="modal" id="globalConfigModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">‚öôÔ∏è Configuraci√≥n Global</h2>
                <button class="modal-close" onclick="hideGlobalConfigModal()">√ó</button>
            </div>
            <div class="form-group">
                <label class="form-label">Tema</label>
                <select class="form-select" id="globalTheme">
                    <option value="light">Claro</option>
                    <option value="dark">Oscuro</option>
                    <option value="auto">Autom√°tico</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Idioma</label>
                <select class="form-select" id="globalLanguage">
                    <option value="es">Espa√±ol</option>
                    <option value="en">English</option>
                </select>
            </div>
            <div class="form-group">
                <button class="btn btn-primary" onclick="saveGlobalConfig()" style="width: 100%;">Guardar Configuraci√≥n</button>
            </div>
        </div>
    </div>

    <!-- Modal de Gesti√≥n de Datos Global -->
    <div class="modal" id="dataManagementModal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2 class="modal-title">üíæ Gesti√≥n de Datos Global</h2>
                <button class="modal-close" onclick="hideDataManagementModal()">√ó</button>
            </div>

            <div class="form-group">
                <h3 style="margin-bottom: 12px;">üì§ Exportar Datos</h3>
                <p style="color: #666; margin-bottom: 16px; font-size: 14px;">
                    Exporta todos los datos de todos los espacios de trabajo.
                </p>
                <div class="data-actions">
                    <button class="btn btn-primary" onclick="exportAllData()">
                        üì§ Exportar Todo
                    </button>
                    <button class="btn btn-secondary" onclick="exportCurrentSpace()">
                        üìã Solo Espacio Actual
                    </button>
                </div>
            </div>

            <div class="form-group">
                <h3 style="margin-bottom: 12px;">üì• Importar Datos</h3>
                <p style="color: #666; margin-bottom: 16px; font-size: 14px;">
                    Importa datos previamente exportados. <strong>Advertencia:</strong> Esto puede reemplazar datos existentes.
                </p>
                <input type="file" id="importFileInput" accept=".json" style="margin-bottom: 16px;" />
                <div class="data-actions">
                    <button class="btn btn-primary" onclick="importData()">
                        üì• Importar Datos
                    </button>
                    <button class="btn btn-danger" onclick="clearAllData()">
                        üóëÔ∏è Limpiar Todo
                    </button>
                </div>
            </div>

            <div class="warning-box">
                <h4>‚ö†Ô∏è Importante</h4>
                <p>Los datos se organizan por espacios de trabajo. Cada espacio mantiene sus datos independientes.</p>
            </div>
        </div>
    </div>

    <!-- Modal de Configuraci√≥n de Espacios -->
    <div class="modal" id="spaceConfigModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">üè¢ Configuraci√≥n de Espacios</h2>
                <button class="modal-close" onclick="hideSpaceConfigModal()">√ó</button>
            </div>
            
            <div class="form-group">
                <h3 style="margin-bottom: 12px;">üìã Espacios Disponibles</h3>
                <div id="spacesList" class="spaces-list">
                    <!-- Los espacios se cargar√°n din√°micamente -->
                </div>
            </div>

            <div class="form-group">
                <h3 style="margin-bottom: 12px;">üìä Informaci√≥n del Espacio Actual</h3>
                <div class="space-info-card">
                    <div class="space-info-item">
                        <strong>Nombre:</strong> <span id="currentSpaceName">-</span>
                    </div>
                    <div class="space-info-item">
                        <strong>Tipo:</strong> <span id="currentSpaceType">-</span>
                    </div>
                    <div class="space-info-item">
                        <strong>Estado:</strong> <span id="currentSpaceStatus">-</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
    <script src="core.js"></script>
</body>
</html>